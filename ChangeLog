2010-06-07  Joerg Wunsch <j.gnu@uriah.heep.sax.de>

	Submitted by Aleksandar Kanchev:
	bug #27242: realloc: serious error when size shrinks
	* stdlib/reallo.c: Change freelist calculation.
	* tests/simulate/regression/bug-27242.c: New file.

2010-06-07  Joerg Wunsch <j.gnu@uriah.heep.sax.de>

	* tests/simulate/stdlib/malloc-4.c: New file.

2010-06-04  Joerg Wunsch <j.gnu@uriah.heep.sax.de>

	Patch submitted by Stefan Ernst:
	patch #6895: Improved malloc behaviour when expanding used area
	bug #27235: malloc: Several things go wrong (part 1)
	* stdlib/malloc.c: Improve allocation strategy.
	* tests/simulate/regression/bug-27235-1.c: New file.

2010-06-04  Joerg Wunsch <j.gnu@uriah.heep.sax.de>

	Add some initial malloc and realloc tests to test
	suite.
	* tests/simulate/stdlib/malloc-1.c: New file.
	* tests/simulate/stdlib/malloc-2.c: (Ditto.)
	* tests/simulate/stdlib/malloc-3.c: (Ditto.)
	* tests/simulate/stdlib/realloc-1.c: (Ditto.)

2010-04-16  Anitha Boyapati <anitha.boyapati@atmel.com>

        Fix bug #28574.
	* include/avr/iox128d3.h - Modify EVSYS_t and ADC_t structures to 
	  include reserved registers.	
	* include/avr/iox16d4.h  - Same.
	* include/avr/iox192d3.h - Same.
	* include/avr/iox256d3.h - Same.
	* include/avr/iox32d4.h  - Same.
	* include/avr/iox64d3.h  - Same.

2010-04-12  Joerg Wunsch <j.gnu@uriah.heep.sax.de>

	* configure.ac (CHECK_BUILTIN_DELAY_CYCLES): Reimplement as a
	compiler + grep pipeline rather than through AC_LINK_IFELSE, as we
	cannot rely on a working linker while building the library.

2010-04-12  Joerg Wunsch <j.gnu@uriah.heep.sax.de>

	* devtools/gen-avr-lib-tree.sh: Fix directory name for ATxmega64A1U.

2010-04-06  Anitha Boyapati <anitha.boyapati@atmel.com>

        Fix bug #28584.
	* include/avr/iocanxx.h - Add word definitions CANIE and CANEN.

2010-04-06  Anitha Boyapati <anitha.boyapati@atmel.com>

        Fix bug #28627.
	* include/avr/power.h - ATmega32U2 defined for clock_prescale_set.

2010-04-06  Anitha Boyapati <anitha.boyapati@atmel.com>

        Fix bug #28901.
        * include/avr/iox128a1.h - Removed GPIO and CPU memory map entries.
        * include/avr/iox128a1u.h - Same.
        * include/avr/iox128a3.h - Same.
        * include/avr/iox128d3.h - Same.
        * include/avr/iox16a4.h - Same.
        * include/avr/iox16d4.h - Same.
        * include/avr/iox192a3.h - Same.
        * include/avr/iox192d3.h - Same.
        * include/avr/iox256a3.h - Same.
        * include/avr/iox256a3b.h - Same.
        * include/avr/iox256d3.h - Same.
        * include/avr/iox32a4.h - Same.
        * include/avr/iox32d4.h - Same.
        * include/avr/iox64a1.h - Same.
        * include/avr/iox64a3.h - Same.
        * include/avr/iox64d3.h - Same.

2010-04-05  Eric B. Weddington  <eric.weddington@atmel.com>

	Fix for bug #27367.
	* include/avr/iom8.h: Add RAMSTART definition.
	* include/avr/iom16.h: Same.
	* include/avr/iom32.h: Same.
	* include/avr/iom164.h: Same.
	* include/avr/iom324.h: Same.
	* include/avr/iom644.h: Same.
	* include/avr/iom644p.h: Same.
	* include/avr/iom328p.h: Same.
	* include/avr/iom48.h: Same.
	* include/avr/iom48p.h: Same.
	* include/avr/iom88.h: Same.
	* include/avr/iom88p.h: Same.
	* include/avr/iom168.h: Same.
	* include/avr/iom168p.h: Same.
	* include/avr/iom325.h: Same.
	* include/avr/iom645.h: Same.
	* include/avr/iom3250.h: Same.
	* include/avr/iom6450.h: Same.
	* include/avr/iotn2313.h: Same.
	* include/avr/iom8515.h: Same.
	* include/avr/iom8535.h: Same.
	* include/avr/iotn13.h: Same.
	* include/avr/iotn24.h: Same.
	* include/avr/iotn25.h: Same.
	* include/avr/iotn44.h: Same.
	* include/avr/iotn45.h: Same.
	* include/avr/iotn84.h: Same.
	* include/avr/iotn85.h: Same.
	* include/avr/iotn261.h: Same.
	* include/avr/iotn461.h: Same.
	* include/avr/iotn861.h: Same.
	* include/avr/iotn88.h: Same.
	* include/avr/iotn48.h: Same.
	* include/avr/iom1281.h: Same.
	* include/avr/iom1284p.h: Same.
	* NEW: Add to fixed bug list.

2010-03-30  Eric B. Weddington  <eric.weddington@atmel.com>

	* crt1/gcrt1.S: Add more interrupt vectors to cover the ATxmega128A1U
	device.

2010-03-30  Eric B. Weddington  <eric.weddington@atmel.com>

	* xml/avrgcc-header: Modify XMEGA portion of script to not generate CPU
	and GPIO definitions that include references to non-existent structures.
	This is a partial fix for bug #28901, for future header files.

2010-03-28  Eric B. Weddington  <eric.weddington@atmel.com>

	Add support for new device: m3000.
	* configure.ac: Add support for new device.
	* devtools/gen-avr-lib-tree.sh: Same.
	* include/avr/io.h: Same.
	* doc/api/main_page.dox: Same.
	* doc/api/using-tools.dox: Same.
	* include/avr/iom3000.h: New file.
	* NEWS: Add news item.

2010-03-28  Eric B. Weddington  <eric.weddington@atmel.com>

	Add support for new devices: attiny84a, atmega325a, atmega3250a,
	atmega329a, atmega3290a.
	* configure.ac: Add support for new devices.
	* devtools/gen-avr-lib-tree.sh: Same.
	* include/avr/io.h: Same.
	* doc/api/main_page.dox: Same.
	* doc/api/using-tools.dox: Same.
	* include/avr/power.h: Same.
	* include/avr/wdt.h: Same.
	* include/avr/sleep.h: Same.
	* include/avr/eeprom.h: Same.
	* NEWS: Add news item.

2010-03-25  Eric B. Weddington  <eric.weddington@atmel.com>

	Add support for new architecture: avrtiny10. Add support for new devices:
	attiny4, attiny5, attiny9, attiny10, attiny20, attiny40.
	* configure.ac: Add support for new devices.
	* devtools/gen-avr-lib-tree.sh: Same.
	* include/avr/Makefile.am: Same.
	* include/avr/io.h: Same.
	* doc/api/main_page.dox: Same.
	* doc/api/using-tools.dox: Same.
	* include/avr/power.h: Same.
	* include/avr/sleep.h: Same.
	* NEWS: Add news item.

2010-03-25  Eric B. Weddington  <eric.weddington@atmel.com>

	Add support for new devices: ATxmega128A1U, ATxmega64A1U.
	* configure.ac: Add support for new devices.
	* devtools/gen-avr-lib-tree.sh: Same.
	* include/avr/Makefile.am: Same.
	* include/avr/io.h: Same.
	* doc/api/main_page.dox: Same.
	* doc/api/using-tools.dox: Same.
	* include/avr/power.h: Same.
	* include/avr/wdt.h: Same.
	* include/avr/sleep.h: Same.
	* include/avr/eeprom.h: Same.
	* NEWS: Add news item.

2010-03-22  Eric B. Weddington  <eric.weddington@atmel.com>

	* include/avr/iox64a1u.h: New file.

2010-03-20  Eric B. Weddington  <eric.weddington@atmel.com>

	* include/avr/fuse.h: Add definition of FUSES for XMEGA devices.
	* include/avr/iox128a1u.h: Regenerate file. New definitions, corrections.

2010-03-19  Eric B. Weddington  <eric.weddington@atmel.com>

	* include/avr/iotn20.h: New file.
	* include/avr/iotn40.h: New file.

2010-03-17  Joerg Wunsch <j.gnu@uriah.heep.sax.de>

	Probe the compiler for the availability of the
	__builtin_avr_delay_cycles() function, and modify the header files
	<util/delay.h> and <avr/builtins.h> appropriately.  Note that the
	modification is done by setting __HAS_DELAY_CYCLES on top of those
	files, which has been left overridable from the compiler
	environment (i.e., commandline -D option) on purpose.  Note also
	that _delay_us() and _delay_ms() can only use
	__builtin_avr_delay_cycles() if optimization is enabled as they'd
	otherwise try to pass a floating-point argument to it which is not
	allowed.  (The compiler does not seem to be able to convert it
	into an unsigned long internally, not even with a type cast.)
	However, not enabling optimization for them yields garbage timing
	anyway, due to moving the compile-time constant floating-point
	calculations from the compiler into the AVR.
	* configure.ac: Add detection of __builtin_avr_delay_cycles
	* include/util/delay.h.in: repocopied from delay.h
	* include/util/Makefile.am: added delay.h.in
	* include/avr/builtins.h.in: New file.
	* include/avr/Makefile.am: added builtins.h.in

2010-03-11  Eric B. Weddington  <eric.weddington@atmel.com>

	Fix bug #28575.
	* include/avr/iousb162.h (LFUSE_DEFAULT, HFUSE_DEFAULT, EFUSE_DEFAULT):
	Fix definition.
	* include/avr/iousb82.h: Same.
	* include/avr/iousb647.h: Same.
	* include/avr/iousb646.h: Same.
	* NEWS: Add to fixed bug list.

2010-03-11  Eric B. Weddington  <eric.weddington@atmel.com>

	Fix bug #28812.
	* include/avr/iotn48.h: Fix values of TWS3-7.
	* NEWS: Add to fixed bug list.

2010-02-03  Joerg Wunsch <j.gnu@uriah.heep.sax.de>

	bug #28756: Bug in AVR libc 1.6.7 (power.h for 8-bit AVR)
	* include/avr/power.h (clock_prescale_set): Implement as an inline
	function rather than a macro so it syntactically becomes a true
	function.

2010-01-22  Eric B. Weddington  <eric.weddington@atmel.com>

	* include/avr/iox128a1u.h: Add new file.

2010-01-21  Joerg Wunsch <j.gnu@uriah.heep.sax.de>

	bug #28688: using_tools.dox fails to build due to extra underscore
	* doc/api/Makefile.am: added logic to detect which filename
	doxygen did generate; while being here, fix the table layout as
	well

2010-01-20  Eric B. Weddington  <eric.weddington@atmel.com>

	Rotate ChangeLogs.
	* ChangeLog-2009: New file.
	* ChangeLog: Clear for 2010.
	* Makefile.am (EXTRA_DIST): Add ChangeLog-2009.

For older changes see ChangeLog-2009
