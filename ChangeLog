2004-07-20  Joerg Wunsch <j.gnu@uriah.heep.sax.de>

	* libm/fplib/strtod.S: fix parsing of a partial
	exponent, fix *endp return value (savanna bug #2924)

2004-07-17  Joerg Wunsch <j.gnu@uriah.heep.sax.de>

	* libm/fplib/pow.S: localize labels, fix pow(N, 0).

2004-07-10  Joerg Wunsch <j.gnu@uriah.heep.sax.de>

	* include/inttypes.h: avr-gcc >= 3.5 will be able to
	provide [u]int32_t when -mint8 is in effect.

2004-07-02  Theodore A. Roth  <troth@openavr.org>

	* xml/Atmel2libc.py: Add copyright/license.
	Tweaks to handle inconsistencies in Atmel's files.
	* xml/Desc-parser.py: New file.
	* xml/Device.dtd: Make rww_start and rww_end optional since some
	devices don't have rww.
	* xml/Validate.py: Allow shell gobbing to work so you can validate more
	than one file at a time.

2004-06-30  Theodore A. Roth  <troth@openavr.org>

	* xml/Atmel2libc.py: Work around bugs in Atmel's xml files.
	* xml/Device.dtd: Change order of nrww and rww bootloader attributes.

2004-06-30  Theodore A. Roth  <troth@openavr.org>

	* xml/Atmel2libc.py: Add code to handle the boot loader information.
	* xml/Device.dtd: Add bootloader element.

2004-06-23  Theodore A. Roth  <troth@openavr.org>

	* xml/Atmel2libc.py (gather_io_info): New function.
	(dump_ioregs): Implement dumping ioregisters.
	* xml/Device.dtd: Move ioreg elements into ioregisters element.
	Add access and init attributes to bit_field element.

2004-06-22  Theodore A. Roth  <troth@openavr.org>

	* xml/Atmel2libc.py: Fixes to allow validation of generated file.
	* xml/Device.dtd: Ditto.
	* xml/Validate.py: New file.

2004-06-22  Theodore A. Roth  <troth@openavr.org>

	* xml/Device.dtd: Fix some syntax errors.

2004-06-22  Theodore A. Roth  <troth@openavr.org>

	* xml/Atmel2libc.py: Now dumps header, memory size info and interrupts
	data as well-formed XML.
	* xml/Device.dtd: Change memory info to memory sizes.

2004-06-21  Theodore A. Roth  <troth@openavr.org>

	* xml/Atmel2libc.py: New file.
	* xml/Device.dtd: Don't force copyright/license in doc (just use a
	comment).
	Make device name an attribute of device.
	Add memory_info element of device.
	Massage the interrupt and vector elements.

2004-06-20  Theodore A. Roth  <troth@openavr.org>

	* xml: New directory.
	* xml/Device.dtd: New file.

2004-06-04  Theodore A. Roth  <troth@openavr.org>

	* Makefile.am (install-data-local): Install version.h file.
	* acconfig.h: New file.
	* config-ml.in: When adding the Multi.tem fragment to the Makefile,
	don't use a variable or the fragment will be added to the version.h
	file instead of the Makefile.
	* configure.in: Generate the version.h config header file.
	* reconf: Run autoheader.

2004-05-25  Joerg Wunsch <j.gnu@uriah.heep.sax.de>

	* doc/examples/demo.c: Update for ATmega8

2004-05-21  Theodore A. Roth  <troth@openavr.org>
[Contributed by Bruce Graham <bgraham@huronnet.com>]

	* configure.in (AM_INIT_AUTOMAKE): Bump version.
	* include/avr/iotn13.h: Add comments for register defs.
	Fix SPMEN bit def.

2004-05-14  Theodore A. Roth  <troth@openavr.org>
[Thanks to Bruce Graham <bgraham@huronnet.com> for reporting these.]

	* configure.in (AM_INIT_AUTOMAKE): Bump version.
	* include/avr/iocan128.h (SRW00, SRW01, SRW10, SRW11): Fix bit name.
	(FOC2A, COM2A1, COM2A0): Ditto.

2004-05-13  Theodore A. Roth  <troth@openavr.org>
[Thanks to Bruce Graham <bgraham@huronnet.com> for reporting these.]

	* configure.in (AM_INIT_AUTOMAKE): Bump version.
	* include/avr/iocan128.h (OCR1A, OCR1AL, OCR1AH): Fix register name.
	(OCR1B, OCR1BL, OCR1BH, OCR1CL, OCR1CH): Ditto.
	(OCR3A, OCR3AL, OCR13H, OCR3B, OCR3BL, OCR3BH): Ditto.
	(OCR3CL, OCR3CH): Ditto.
	(OCR1C, OCR3C): Fix register name and address.
	(CANMSG): Define.

2004-04-29  Theodore A. Roth  <troth@openavr.org>

	* configure.in: Set AVR_LIBC_USER_MANUAL with version number appended
	only if versioned docs are requested (that's the default).

2004-04-28  Theodore A. Roth  <troth@openavr.org>

	* include/avr/eeprom.h (eeprom_rb): Remove deprecated interface.
	(eeprom_rw): Ditto.
	(eeprom_wb): Ditto.
	(_EEPUT): Use eeprom_write_byte() directly instead of eeprom_wb().
	(_EEGET): Use eeprom_read_byte() directly instead of eeprom_rb().
	* include/avr/pgmspace.h (PRG_RDB): Remove deprecated interface.
	* include/avr/sfr_defs.h (cbi): Ditto.
	(sbi): Ditto.
	(inb): Ditto.
	(outb): Ditto.
	(inw): Ditto.
	(outw): Ditto.
	(outp): Ditto.
	(inp): Ditto.
	(BV): Ditto.

2004-04-28  Theodore A. Roth  <troth@openavr.org>

	* configure.in (AM_INIT_AUTOMAKE): Bump version.
	* include/eeprom.h: Remove deprecated file.
	* include/ina90.h: Ditto.
	* include/interrupt.h: Ditto.
	* include/io.h: Ditto.
	* include/pgmspace.h: Ditto.
	* include/progmem.h: Ditto.
	* include/sig-avr.h: Ditto.
	* include/twi.h: Ditto.
	* include/wdt.h: Ditto.

2004-04-27  Theodore A. Roth  <troth@openavr.org>

	* configure.in: Fix typo when adding crtm168.o to AVR_CRT_MEGA.

2004-04-27  Theodore A. Roth  <troth@openavr.org>

	* configure.in (AM_INIT_AUTOMAKE): Bump version.
	* include/avr/iocan128.h (RAMPZ): Define.

2004-04-23  Theodore A. Roth  <troth@openavr.org>

	* configure.in:
	* crt1/Makefile.am:
	* include/avr/io.h:
	Add support infrastructure for mega48, mega88, mega168, tiny13,
	tiny2313 and at90can128.

2004-04-23  Theodore A. Roth  <troth@openavr.org>

	* configure.in (AVR_LIBC_USER_MANUAL): Append version number.

2004-04-23  Theodore A. Roth  <troth@openavr.org>

	* include/avr/iomx8.h: Undefine EECR, EEDR, EEAR, EEARL, and EEARH
	before defining them to avoid conflict with predfined values in
	io.h.

2004-04-23  Theodore A. Roth  <troth@openavr.org>

	* include/avr/iocan128.h (UDR0): Define.

2004-04-23  Theodore A. Roth  <troth@openavr.org>

	* include/avr/iocan128.h: Deleted commented out #defines.
	Formatting cleanups.

2004-04-23  Theodore A. Roth  <troth@openavr.org>
[Contributed by Colin O'Flynn <coflynn@newae.com>]

	* configure.in (AM_INIT_AUTOMAKE): Bump version.
	* include/avr/iocan128.h: New file.

2004-04-22  Joerg Wunsch <j.gnu@uriah.heep.sax.de>

	* doc/examples/demo.c: Update for ATmega{64,128}

2004-04-22  Theodore A. Roth  <troth@openavr.org>

	[This fixes bug #8649.]
	* include/avr/sfr_defs.h (bit_is_set): Wrap sfr arg with _SFR_BYTE().
	(bit_is_clear): Ditto.

	* configure.in (AM_INIT_AUTOMAKE): Bump version.
	* include/avr/sfr_defs.h: Move _SFR_BYTE() and _SFR_WORD() #defines to
	be before first usage.

2004-04-20  Theodore A. Roth  <troth@openavr.org>
[Contributed by LAL@pro.onet.pl]

	[This closes patch #2651]
	* include/avr/iom169.h: Change SIG_UART0_RECV to SIG_USART_RECV.
	Change SIG_UART0_DATA to SIG_USART_DATA.
	Change SIG_UART0_TRANS to SIG_USART_TRANS.

2004-04-20  Theodore A. Roth  <troth@openavr.org>

	[This change should fix bug #8391]
	* include/avr/boot.h (__BOOT_LOCK_BITS_MASK): Remove.
	(__boot_lock_bits_set): Use the compliment of lock_bits arg so the user
	specifies only which bits are to be set. NOTE that this changes the
	usage but the previous usage was confusing and not well documented.
	(__boot_lock_bits_set_alternate): Ditto.
	(boot_lock_bits_set): Improve documentation.

2004-04-16  Theodore A. Roth  <troth@openavr.org>
[Contributed by Wolfgang Haidinger <wh@vmars.tuwien.ac.at>]

	* configure.in (AM_INIT_AUTOMAKE): Bump version.
	* NEWS: Add note about new pgmspaces macros.
	* include/avr/pgmspace.h: Extend API to allow access of 32 bit
	unsigned double words.

2004-04-14  Theodore A. Roth  <troth@openavr.org>

	* configure.in (AM_INIT_AUTOMAKE): Bump version.
	* include/avr/iotn13.h: New file.

2004-04-13  Theodore A. Roth  <troth@openavr.org>

	* include/avr/iotn2313.h: Don't define the EERIE, EEMPE, EEPE and EERE
	bits since they're defined in <avr/io.h>.

2004-04-13  Joerg Wunsch <j.gnu@uriah.heep.sax.de>
[Contributed by <adebeun@enatel.net>]

	* include/avr/wdt.h: Fix _wdt_write() for the ATmega169,
	closes bug #8119.

2004-04-13  Theodore A. Roth  <troth@openavr.org>
[Contributed by Bob Paddock <bpaddock@csonline.net>]

	* configure.in (AM_INIT_AUTOMAKE): Bump version.
	* include/avr/iotn2313.h: New file.

2004-04-06  Joerg Wunsch <j.gnu@uriah.heep.sax.de>

	* doc/api/faq.dox: Cosmetics: update (C) year, remove some
	vestiges of trailing whitespace.

2004-04-06  Theodore A. Roth  <troth@openavr.org>

	* include/avr/iom169.h: Update copyright year.
	Fixes for bug #8452.
	(OCR1A): Fix register name.
	(OCR1B): Ditto.
	(UCSRA): Ditto.
	(UCSRB): Ditto.
	(UCSRC): Ditto.
	(UBRR): Ditto.
	(UDR): Ditto.
	(PG5): Remove define.
	(ADHSM): Ditto.
	(WDCE): Fix bit name.
	(ISC01, ISC00): Define for EICRA register.

2004-04-06  Joerg Wunsch <j.gnu@uriah.heep.sax.de>

	* doc/api/faq.dox: Add items for "clock skew detected", why
	are interrupt bits cleared by a `1', and why are programmed
	fuse bits at logical 0.

2004-04-06  Theodore A. Roth  <troth@openavr.org>

	* include/avr/iomx8.h (ADC): Fix to make it 16 bit.
	(ADCW): Ditto.

2004-04-06  Theodore A. Roth  <troth@openavr.org>

	* configure.in (AM_INIT_AUTOMAKE): Bump version.
	* include/avr/iom168.h: New file.
	* include/avr/iom48.h: New file.
	* include/avr/iom88.h: New file.
	* include/avr/iomx8.h: New file.

2004-04-05  Joerg Wunsch <j.gnu@uriah.heep.sax.de>

	* doc/api/main_page.dox, faq.dox: Add reference to Bruce Lightner's
	trickery page for programming small AVRs in C.

2004-04-05  Theodore A. Roth  <troth@openavr.org>

	* configure.in (AM_INIT_AUTOMAKE): Bump version.
	* libc/stdio/vfscanf.c: Rename set_bit and bit_is_set to avoid name
	space clash.
	Add parentheses when checking flags to quell a compiler warning.

2004-03-22  Theodore A. Roth  <troth@openavr.org>
[Thanks to Tim Lapawa <lapawa@insynergie.de>]

	* configure.in (AM_INIT_AUTOMAKE): Bump version.
	* include/avr/io43u32x.h (TICIE1): Fix value.
	* include/avr/io43u35x.h (TICIE1): Fix value.

2004-03-08  Theodore A. Roth  <troth@openavr.org>

	* ChangeLog: Move 2003 entries to ChangeLog-2003.
	* ChangeLog-2003: New file.
	* Makefile.am (EXTRA_DIST): Add ChangeLog-2003 and ChangeLog-2002.
	* configure.in (AM_INIT_AUTOMAKE): Bump version.

2004-03-05  Joerg Wunsch <j.gnu@uriah.heep.sax.de>

	* libm/fplib/dtostrf.S: fix bug # 7989 (preserve r16/r17); use
	movw when possible.
	* include/stdlib.h: document the return values of dtostre() and
	dtostrf().

2004-03-04  Joerg Wunsch <j.gnu@uriah.heep.sax.de>

	* libm/fplib/dtostrf.S: make labels local.

2004-03-04  Theodore A. Roth  <troth@openavr.org>

	* include/avr/boot.h: Define BLBnx bit positions. [Bug #7469]

2004-03-04  Theodore A. Roth  <troth@openavr.org>

	* NEWS: Add note about boot API changes.
	* include/avr/boot.h: Change example to show a more efficient usage
	of the API.
	(__boot_page_fill_normal): Remove checks for spm and eeprom busy. These
	are redundant checks in normal usage and just bloat the bootloader.
	(__boot_page_fill_alternate): Ditto.
	(__boot_page_fill_extended): Ditto.
	(__boot_page_erase_normal): Ditto.
	(__boot_page_erase_alternate): Ditto.
	(__boot_page_erase_extended): Ditto.
	(__boot_page_write_normal): Ditto.
	(__boot_page_write_alternate): Ditto.
	(__boot_page_write_extended): Ditto.
	(__boot_rww_enable): Ditto.
	(__boot_rww_enable_alternate): Ditto.
	(__boot_lock_bits_set): Ditto.
	(__boot_lock_bits_set_alternate): Ditto.
	(boot_page_fill_safe): New macro.
	(boot_page_erase_safe): New macro.
	(boot_page_write_safe): New macro.
	(boot_rww_enable_safe): New macro.
	(boot_lock_bits_set_safe): New macro.

2004-02-25  Theodore A. Roth  <troth@openavr.org>

	* configure.in (AM_INIT_AUTOMAKE): Bump version.
	* NEWS: Add note about new eeprom macro.
	* include/avr/boot.h: Update copyright year.
	(__boot_page_fill_normal): Replace while loop with eeprom_busy_wait.
	(__boot_page_fill_alternate): Ditto.
	(__boot_page_fill_extended): Ditto.
	(__boot_page_erase_normal): Ditto.
	(__boot_page_erase_alternate): Ditto.
	(__boot_page_erase_extended): Ditto.
	(__boot_page_write_normal): Ditto.
	(__boot_page_write_alternate): Ditto.
	(__boot_page_write_extended): Ditto.
	(__boot_rww_enable): Ditto.
	(__boot_rww_enable_alternate): Ditto.
	(__boot_lock_bits_set): Ditto.
	(__boot_lock_bits_set_alternate): Ditto.
	* include/avr/eeprom.h: Update copyright year.
	(eeprom_busy_wait): New macro interface.

2004-02-22  Joerg Wunsch <j.gnu@uriah.heep.sax.de>

	* doc/examples/twitest/twitest.dox: Fix more formatting bugs.

2004-02-19  Joerg Wunsch <j.gnu@uriah.heep.sax.de>

	* doc/examples/twitest/twitest.dox: Fix formatting bugs.

2004-02-18  Joerg Wunsch <j.gnu@uriah.heep.sax.de>

	* doc/api/inline_asm.dox: Fix use of _SFR_IO_ADDR() in inline asm.
	* doc/api/faq.dox: Ditto.

2004-02-15  Joerg Wunsch <j.gnu@uriah.heep.sax.de>

	* libc/stdlib/malloc.c: Fix bug #2143 (malloc wrap around top of RAM)
	* include/avr/timer.h: The mailing list agreed to remove this file.
	* include/timer.h: Remove this wrapper as well.

2004-02-13  Joerg Wunsch <j.gnu@uriah.heep.sax.de>

	* include/avr/interrupt.h: make timer_enable_int() static inline;
	fixes bug #5454.

2004-02-13  Joerg Wunsch <j.gnu@uriah.heep.sax.de>

	* include/avr/crc16.h: use __inline__ instead of inline.
	* include/avr/delay.h: Ditto.
	* include/avr/interrupt.h: Ditto:
	* include/avr/timer.h: Ditto.

2004-02-13  Joerg Wunsch <j.gnu@uriah.heep.sax.de>

	* libc/stdio/vfscanf.c: Apply patch #2554: fix %ul format.

2004-02-12  Joerg Wunsch <j.gnu@uriah.heep.sax.de>

	* libc/stdio/vfprintf.c: Fix bug #7556 (%s format with precision issue)

For older changes see ChangeLog-2003
