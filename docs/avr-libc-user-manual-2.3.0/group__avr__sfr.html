<!-- HTML header for doxygen 1.8.7-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<title>AVR-LibC: &lt;avr/sfr_defs.h&gt;: Special function registers</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="dox.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">AVR-LibC
   &#160;<span id="projectnumber">2.3.0git</span>
   </div>
   <div id="projectbrief">Standard C library for AVR-GCC</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
<table>
  <tr>
    <td align="left"><a href="https://avrdudes.github.io/avr-libc/"><h2>AVR-LibC Documen&shy;tation</h2></a></td>
    <td align="center" colspan=4>
      <div class="logo"><img src="avr-libc-logo.png" alt="Logo" align="middle" border="0"></div>
      <div class="invlogo"><img src="avr-libc-logo-inverted.png" alt="Logo" align="middle" border="0"></div>
    </td>
    <td align="right" colspan=2><a href="https://github.com/avrdudes/avr-libc/"><h2>AVR-LibC Development Pages</h2></a></td>
  </tr>
  <tr>
    <td align="center" width="15%"><a href="index.html"><h2>Main Page</h2></a></td>
    <td align="center" width="15%"><a href="pages.html"><h2>User Manual</h2></a></td>
    <td align="center" width="15%"><a href="modules.html"><h2>Library Refe&shy;rence</h2></a></td>
    <td align="center" width="8%"><a href="FAQ.html"><h2>FAQ</h2></a></td>
    <td align="center" width="15%"><a href="group__demos.html"><h2>Example Projects</h2></a></td>
    <td align="center" width="8%"><a href="files.html"><h2>File List</h2></a></td>
    <td align="center" width="8%"><a href="Global_01Index.html"><h2>Index</h2></a></td>
  </tr>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#groups">Modules</a>  </div>
  <div class="headertitle"><div class="title">&lt;avr/sfr_defs.h&gt;: Special function registers</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="groups" name="groups"></a>
Modules</h2></td></tr>
<tr class="memitem:group__avr__sfr__notes"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__avr__sfr__notes.html">Additional notes from &lt;avr/sfr_defs.h&gt;</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader">Bit manipulation</h2></td></tr>
<tr class="memitem:ga11643f271076024c395a93800b3d9546"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__avr__sfr.html#ga11643f271076024c395a93800b3d9546">_BV</a>(bit)&#160;&#160;&#160;(1 &lt;&lt; (bit))</td></tr>
<tr class="separator:ga11643f271076024c395a93800b3d9546"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader">IO register bit manipulation</h2></td></tr>
<tr class="memitem:ga3b034cb1d74b9addc7599bd6ea6bd0d9"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__avr__sfr.html#ga3b034cb1d74b9addc7599bd6ea6bd0d9">bit_is_set</a>(sfr,  bit)&#160;&#160;&#160;(_SFR_BYTE(sfr) &amp; <a class="el" href="group__avr__sfr.html#ga11643f271076024c395a93800b3d9546">_BV</a>(bit))</td></tr>
<tr class="separator:ga3b034cb1d74b9addc7599bd6ea6bd0d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad188fb0fbfd923bdb01294072367d024"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__avr__sfr.html#gad188fb0fbfd923bdb01294072367d024">bit_is_clear</a>(sfr,  bit)&#160;&#160;&#160;(!(_SFR_BYTE(sfr) &amp; <a class="el" href="group__avr__sfr.html#ga11643f271076024c395a93800b3d9546">_BV</a>(bit)))</td></tr>
<tr class="separator:gad188fb0fbfd923bdb01294072367d024"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaaf6857fa882da35f8685e2001e5c3bbe"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__avr__sfr.html#gaaf6857fa882da35f8685e2001e5c3bbe">loop_until_bit_is_set</a>(sfr,  bit)&#160;&#160;&#160;do { } while (<a class="el" href="group__avr__sfr.html#gad188fb0fbfd923bdb01294072367d024">bit_is_clear</a>(sfr, bit))</td></tr>
<tr class="separator:gaaf6857fa882da35f8685e2001e5c3bbe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabf06c3d703cf5adc691c0be5d72e7839"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__avr__sfr.html#gabf06c3d703cf5adc691c0be5d72e7839">loop_until_bit_is_clear</a>(sfr,  bit)&#160;&#160;&#160;do { } while (<a class="el" href="group__avr__sfr.html#ga3b034cb1d74b9addc7599bd6ea6bd0d9">bit_is_set</a>(sfr, bit))</td></tr>
<tr class="separator:gabf06c3d703cf5adc691c0be5d72e7839"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>When working with microcontrollers, many tasks usually consist of controlling internal peripherals, or external peripherals that are connected to the device. The entire IO address space is made available as <em>memory-mapped IO</em>, i.e. it can be accessed using all the MCU instructions that are applicable to normal data memory. For most AVR devices, the IO register space is mapped into the data memory address space with an offset of 0x20 since the bottom of this space is reserved for direct access to the MCU registers. (Actual SRAM is available only behind the IO register area, starting at some specific address depending on the device.)</p>
<p>For example the user can access memory-mapped IO registers as if they were globally defined variables like this:</p>
<div class="fragment"><div class="line">PORTA = 0x33;</div>
<div class="line"><span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> foo = PINA;</div>
</div><!-- fragment --><p>The compiler will choose the correct instruction sequence to generate based on the address of the register being accessed.</p>
<p>The advantage of using the memory-mapped registers in C programs is that it makes the programs more portable to other C compilers for the AVR platform.</p>
<p>Note that special care must be taken when accessing some of the 16-bit timer IO registers where access from both the main program and within an interrupt context can happen. See <a class="el" href="FAQ.html#faq_16bitio">Why do some 16-bit timer registers sometimes get trashed?</a>.</p>
<dl class="section user"><dt>Porting programs that use the deprecated sbi/cbi macros</dt><dd></dd></dl>
<p>Access to the AVR single bit set and clear instructions are provided via the standard C bit manipulation commands. The sbi and cbi macros are no longer directly supported. sbi (sfr,bit) can be replaced by sfr |= <a class="el" href="group__avr__sfr.html#ga11643f271076024c395a93800b3d9546">_BV(bit)</a> .</p>
<p>i.e.: <a class="el" href="group__deprecated__items.html#ga014ef751e83f97569c06f3cdd888f3f7">sbi(PORTB, PB1)</a>; is now PORTB |= <a class="el" href="group__avr__sfr.html#ga11643f271076024c395a93800b3d9546">_BV(PB1)</a>;</p>
<p>This actually is more flexible than having sbi directly, as the optimizer will use a hardware sbi if appropriate, or a read/or/write operation if not appropriate. You do not need to keep track of which registers sbi/cbi will operate on.</p>
<p>Likewise, cbi (sfr,bit) is now sfr &amp;= ~(<a class="el" href="group__avr__sfr.html#ga11643f271076024c395a93800b3d9546">_BV(bit)</a>); </p>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ga11643f271076024c395a93800b3d9546" name="ga11643f271076024c395a93800b3d9546"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga11643f271076024c395a93800b3d9546">&#9670;&#160;</a></span>_BV</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define _BV</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">bit</td><td>)</td>
          <td>&#160;&#160;&#160;(1 &lt;&lt; (bit))</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="io_8h.html">avr/io.h</a>&gt;</span></div>
<div class="ttc" id="aio_8h_html"><div class="ttname"><a href="io_8h.html">io.h</a></div></div>
</div><!-- fragment --><p>Converts a bit number into a byte value.</p>
<dl class="section note"><dt>Note</dt><dd>The bit shift is performed by the compiler which then inserts the result into the code. Thus, there is no run-time overhead when using <a class="el" href="group__avr__sfr.html#ga11643f271076024c395a93800b3d9546">_BV()</a>. </dd></dl>

</div>
</div>
<a id="gad188fb0fbfd923bdb01294072367d024" name="gad188fb0fbfd923bdb01294072367d024"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad188fb0fbfd923bdb01294072367d024">&#9670;&#160;</a></span>bit_is_clear</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define bit_is_clear</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">sfr, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">bit&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;(!(_SFR_BYTE(sfr) &amp; <a class="el" href="group__avr__sfr.html#ga11643f271076024c395a93800b3d9546">_BV</a>(bit)))</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="io_8h.html">avr/io.h</a>&gt;</span></div>
</div><!-- fragment --><p>Test whether bit <code>bit</code> in IO register <code>sfr</code> is clear. This will return non-zero if the bit is clear, and a 0 if the bit is set. </p>

</div>
</div>
<a id="ga3b034cb1d74b9addc7599bd6ea6bd0d9" name="ga3b034cb1d74b9addc7599bd6ea6bd0d9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga3b034cb1d74b9addc7599bd6ea6bd0d9">&#9670;&#160;</a></span>bit_is_set</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define bit_is_set</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">sfr, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">bit&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;(_SFR_BYTE(sfr) &amp; <a class="el" href="group__avr__sfr.html#ga11643f271076024c395a93800b3d9546">_BV</a>(bit))</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="io_8h.html">avr/io.h</a>&gt;</span></div>
</div><!-- fragment --><p>Test whether bit <code>bit</code> in IO register <code>sfr</code> is set. This will return a 0 if the bit is clear, and non-zero if the bit is set. </p>

</div>
</div>
<a id="gabf06c3d703cf5adc691c0be5d72e7839" name="gabf06c3d703cf5adc691c0be5d72e7839"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gabf06c3d703cf5adc691c0be5d72e7839">&#9670;&#160;</a></span>loop_until_bit_is_clear</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define loop_until_bit_is_clear</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">sfr, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">bit&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;do { } while (<a class="el" href="group__avr__sfr.html#ga3b034cb1d74b9addc7599bd6ea6bd0d9">bit_is_set</a>(sfr, bit))</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="io_8h.html">avr/io.h</a>&gt;</span></div>
</div><!-- fragment --><p>Wait until bit <code>bit</code> in IO register <code>sfr</code> is clear. </p>

</div>
</div>
<a id="gaaf6857fa882da35f8685e2001e5c3bbe" name="gaaf6857fa882da35f8685e2001e5c3bbe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaaf6857fa882da35f8685e2001e5c3bbe">&#9670;&#160;</a></span>loop_until_bit_is_set</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define loop_until_bit_is_set</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">sfr, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">bit&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;do { } while (<a class="el" href="group__avr__sfr.html#gad188fb0fbfd923bdb01294072367d024">bit_is_clear</a>(sfr, bit))</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="io_8h.html">avr/io.h</a>&gt;</span></div>
</div><!-- fragment --><p>Wait until bit <code>bit</code> in IO register <code>sfr</code> is set. </p>

</div>
</div>
</div><!-- contents -->
<!-- HTML footer for doxygen 1.8.7-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Aug 24 2025 20:40:11 for AVR-LibC by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.9.6
</small></address>
</body>
</html>
